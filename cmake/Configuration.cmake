include(CheckCXXStandardSupport)

if ("${CMAKE_CXX_STANDARD}" STREQUAL "")
    CheckCXXStandardSupport(11 LSD_COMPILER_SUPPORT_STD_11)
    CheckCXXStandardSupport(14 LSD_COMPILER_SUPPORT_STD_14)
    CheckCXXStandardSupport(17 LSD_COMPILER_SUPPORT_STD_17)
    CheckCXXStandardSupport(20 LSD_COMPILER_SUPPORT_STD_20)
    CheckCXXStandardSupport(23 LSD_COMPILER_SUPPORT_STD_23)
else()
    set(LSD_COMPILER_SUPPORT_STD_11 0)
    set(LSD_COMPILER_SUPPORT_STD_14 0)
    set(LSD_COMPILER_SUPPORT_STD_17 0)
    set(LSD_COMPILER_SUPPORT_STD_20 0)
    set(LSD_COMPILER_SUPPORT_STD_23 0)
    set(LSD_COMPILER_SUPPORT_STD_${CMAKE_CXX_STANDARD} 1)
endif ()

if(LSD_COMPILER_SUPPORT_STD_23)
    set(LSD_COMPILER_SUPPORT_STD 23)
elseif(LSD_COMPILER_SUPPORT_STD_20)
    set(LSD_COMPILER_SUPPORT_STD 20)
elseif(LSD_COMPILER_SUPPORT_STD_17)
    set(LSD_COMPILER_SUPPORT_STD 17)
elseif(LSD_COMPILER_SUPPORT_STD_14)
    set(LSD_COMPILER_SUPPORT_STD 14)
elseif(LSD_COMPILER_SUPPORT_STD_11)
    set(LSD_COMPILER_SUPPORT_STD 11)
else()
    message(FATAL_ERROR "Compiler must support C++11 at least")
endif ()
